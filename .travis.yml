language: node_js
node_js:
- '12'
dist: xenial
sudo: required
install:
- npm ci
cache:
  directories:
  - "$HOME/.npm"
  - node_modules
branches:
  only:
  - main
script:
- npm run lint
- npm run e2e:ci -- --key $CYPRESS_RECORD_KEY
- npm run e2e:cov
- npm run codecov
- npx update-badge
- npm run build:prod
addons:
  chrome: stable
notifications:
  slack:
    secure: 03rf2r8vBDsOf/u/Hh2Mtyk4uQIEvxVBR+xNNToAiPQnGgzh1zX/1dvXqOPvnWAuJTYCkYMfGydHfN10yq4h/n8Bs1hNqrKPHbAfEAudLEYpQyVP3F2AgqKfrSVdGwTl5x53qFHCXQISBHc8uXGapbGKILjc8TZLUDIPV5DjNHJY4lzrFS2D0BrOcgGptj0gvb5v5vsVep586PVHvm1wwumfdy23ttDt8/RTI+DXQzMmDfzH8v5udkiAKDnPkJwTrqqZyaSBDfmZXPfTxU9SgVaxa5WCm/DNHsoDuLL39u1rWblzI36cPg7F5ik+ULr+vTHjHQACWQgMljHgS6xuMiWxNOU27zUCwJOaGwevhHOmJmBEbE4qEXp0Fa9NqFI6EZHmb0U/+hQbaaBpbG/Jr59klr6zzDEnU873gaxN8Y1PrO35GrXgc76wyBotsB3w5sAqFAZNsdPqArNrp+/O9dYYu/iRug4mObcuLKdroKWb323AhZZvWYjJ6Bqt4cpbLmjisPSN/JFZh5u73fs18Gp2qqYZnZk1IA6VgEwnls9teZqs1v7fMZiqiszWe6N9XmqFcZJpy1hRMq55Ud2naxp7oJdIllEWRHA0gGbsJqNt9cZUuTnHhGdPpiKb5cQlLqDk76dJvdhvAVlHM5/X1l4quQKROUtpjCCqxUua+xM=
